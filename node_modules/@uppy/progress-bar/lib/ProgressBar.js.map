{"version":3,"names":["h","UIPlugin","packageJson","defaultOptions","fixed","hideAfterFinish","ProgressBar","constructor","uppy","opts","id","title","type","render","bind","state","totalProgress","isHidden","className","style","position","width","install","target","mount","uninstall","unmount","VERSION","version"],"sources":["ProgressBar.tsx"],"sourcesContent":["import { h, type ComponentChild } from 'preact'\nimport { UIPlugin } from '@uppy/core'\nimport type {\n  Uppy,\n  State,\n  UIPluginOptions,\n  Body,\n  Meta,\n  DefinePluginOpts,\n} from '@uppy/core'\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nimport packageJson from '../package.json'\n\nexport interface ProgressBarOptions extends UIPluginOptions {\n  hideAfterFinish?: boolean\n  fixed?: boolean\n}\n// set default options, must kept in sync with @uppy/react/src/ProgressBar.js\nconst defaultOptions = {\n  fixed: false,\n  hideAfterFinish: true,\n}\n\ntype Opts = DefinePluginOpts<ProgressBarOptions, keyof typeof defaultOptions>\n\n/**\n * Progress bar\n *\n */\nexport default class ProgressBar<\n  M extends Meta,\n  B extends Body,\n> extends UIPlugin<Opts, M, B> {\n  static VERSION = packageJson.version\n\n  constructor(uppy: Uppy<M, B>, opts?: ProgressBarOptions) {\n    super(uppy, { ...defaultOptions, ...opts })\n    this.id = this.opts.id || 'ProgressBar'\n    this.title = 'Progress Bar'\n    this.type = 'progressindicator'\n\n    this.render = this.render.bind(this)\n  }\n\n  render(state: State<M, B>): ComponentChild {\n    const { totalProgress } = state\n    // before starting and after finish should be hidden if specified in the options\n    const isHidden =\n      (totalProgress === 0 || totalProgress === 100) &&\n      this.opts.hideAfterFinish\n    return (\n      <div\n        className=\"uppy uppy-ProgressBar\"\n        style={{ position: this.opts.fixed ? 'fixed' : 'initial' }}\n        aria-hidden={isHidden}\n      >\n        <div\n          className=\"uppy-ProgressBar-inner\"\n          style={{ width: `${totalProgress}%` }}\n        />\n        <div className=\"uppy-ProgressBar-percentage\">{totalProgress}</div>\n      </div>\n    )\n  }\n\n  install(): void {\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall(): void {\n    this.unmount()\n  }\n}\n"],"mappings":"AAAA,SAASA,CAAC,QAA6B,QAAQ;AAC/C,SAASC,QAAQ,QAAQ,YAAY;AAUrC;AACA;AAAA,MACOC,WAAW;EAAA;AAAA;AAMlB;AACA,MAAMC,cAAc,GAAG;EACrBC,KAAK,EAAE,KAAK;EACZC,eAAe,EAAE;AACnB,CAAC;AAID;AACA;AACA;AACA;AACA,eAAe,MAAMC,WAAW,SAGtBL,QAAQ,CAAa;EAG7BM,WAAWA,CAACC,IAAgB,EAAEC,IAAyB,EAAE;IACvD,KAAK,CAACD,IAAI,EAAE;MAAE,GAAGL,cAAc;MAAE,GAAGM;IAAK,CAAC,CAAC;IAC3C,IAAI,CAACC,EAAE,GAAG,IAAI,CAACD,IAAI,CAACC,EAAE,IAAI,aAAa;IACvC,IAAI,CAACC,KAAK,GAAG,cAAc;IAC3B,IAAI,CAACC,IAAI,GAAG,mBAAmB;IAE/B,IAAI,CAACC,MAAM,GAAG,IAAI,CAACA,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC;EACtC;EAEAD,MAAMA,CAACE,KAAkB,EAAkB;IACzC,MAAM;MAAEC;IAAc,CAAC,GAAGD,KAAK;IAC/B;IACA,MAAME,QAAQ,GACZ,CAACD,aAAa,KAAK,CAAC,IAAIA,aAAa,KAAK,GAAG,KAC7C,IAAI,CAACP,IAAI,CAACJ,eAAe;IAC3B,OACEL,CAAA;MACEkB,SAAS,EAAC,uBAAuB;MACjCC,KAAK,EAAE;QAAEC,QAAQ,EAAE,IAAI,CAACX,IAAI,CAACL,KAAK,GAAG,OAAO,GAAG;MAAU,CAAE;MAC3D,eAAaa;IAAS,GAEtBjB,CAAA;MACEkB,SAAS,EAAC,wBAAwB;MAClCC,KAAK,EAAE;QAAEE,KAAK,EAAE,GAAGL,aAAa;MAAI;IAAE,CACvC,CAAC,EACFhB,CAAA;MAAKkB,SAAS,EAAC;IAA6B,GAAEF,aAAmB,CAC9D,CAAC;EAEV;EAEAM,OAAOA,CAAA,EAAS;IACd,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAI,CAACd,IAAI;IAC5B,IAAIc,MAAM,EAAE;MACV,IAAI,CAACC,KAAK,CAACD,MAAM,EAAE,IAAI,CAAC;IAC1B;EACF;EAEAE,SAASA,CAAA,EAAS;IAChB,IAAI,CAACC,OAAO,CAAC,CAAC;EAChB;AACF;AA9CqBpB,WAAW,CAIvBqB,OAAO,GAAGzB,WAAW,CAAC0B,OAAO","ignoreList":[]}