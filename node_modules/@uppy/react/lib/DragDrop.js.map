{"version":3,"names":["createElement","h","Component","DragDropPlugin","getHTMLProps","nonHtmlPropsHaveChanged","DragDrop","componentDidMount","installPlugin","componentDidUpdate","prevProps","uppy","props","uninstallPlugin","options","target","container","plugin","setOptions","componentWillUnmount","locale","inputName","width","height","note","id","use","getPlugin","removePlugin","render","className","ref"],"sources":["DragDrop.ts"],"sourcesContent":["import { createElement as h, Component } from 'react'\nimport type { UnknownPlugin, Uppy, Body, Meta } from '@uppy/core'\nimport DragDropPlugin, { type DragDropOptions } from '@uppy/drag-drop'\nimport getHTMLProps from './getHTMLProps.js'\nimport nonHtmlPropsHaveChanged from './nonHtmlPropsHaveChanged.js'\n\ninterface DragDropProps<M extends Meta, B extends Body>\n  extends DragDropOptions {\n  uppy: Uppy<M, B>\n}\n\n/**\n * React component that renders an area in which files can be dropped to be\n * uploaded.\n */\n\nclass DragDrop<M extends Meta, B extends Body> extends Component<\n  DragDropProps<M, B>\n> {\n  private container!: HTMLElement\n\n  private plugin!: UnknownPlugin<M, B>\n\n  componentDidMount(): void {\n    this.installPlugin()\n  }\n\n  componentDidUpdate(prevProps: DragDrop<M, B>['props']): void {\n    // eslint-disable-next-line react/destructuring-assignment\n    if (prevProps.uppy !== this.props.uppy) {\n      this.uninstallPlugin(prevProps)\n      this.installPlugin()\n    } else if (nonHtmlPropsHaveChanged(this.props, prevProps)) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { uppy, ...options } = { ...this.props, target: this.container }\n      this.plugin.setOptions(options)\n    }\n  }\n\n  componentWillUnmount(): void {\n    this.uninstallPlugin()\n  }\n\n  installPlugin(): void {\n    const { uppy, locale, inputName, width, height, note, id } = this.props\n    const options = {\n      id: id || 'DragDrop',\n      locale,\n      inputName,\n      width,\n      height,\n      note,\n      target: this.container,\n    }\n\n    uppy.use(DragDropPlugin, options)\n\n    this.plugin = uppy.getPlugin(options.id)!\n  }\n\n  uninstallPlugin(props = this.props): void {\n    const { uppy } = props\n\n    uppy.removePlugin(this.plugin)\n  }\n\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  render() {\n    return h('div', {\n      className: 'uppy-Container',\n      ref: (container: HTMLElement) => {\n        this.container = container\n      },\n      ...getHTMLProps(this.props),\n    })\n  }\n}\n\nexport default DragDrop\n"],"mappings":"AAAA,SAASA,aAAa,IAAIC,CAAC,EAAEC,SAAS,QAAQ,OAAO;AAErD,OAAOC,cAAc,MAAgC,iBAAiB;AACtE,OAAOC,YAAY,MAAM,mBAAmB;AAC5C,OAAOC,uBAAuB,MAAM,8BAA8B;AAOlE;AACA;AACA;AACA;;AAEA,MAAMC,QAAQ,SAAyCJ,SAAS,CAE9D;EAKAK,iBAAiBA,CAAA,EAAS;IACxB,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB;EAEAC,kBAAkBA,CAACC,SAAkC,EAAQ;IAC3D;IACA,IAAIA,SAAS,CAACC,IAAI,KAAK,IAAI,CAACC,KAAK,CAACD,IAAI,EAAE;MACtC,IAAI,CAACE,eAAe,CAACH,SAAS,CAAC;MAC/B,IAAI,CAACF,aAAa,CAAC,CAAC;IACtB,CAAC,MAAM,IAAIH,uBAAuB,CAAC,IAAI,CAACO,KAAK,EAAEF,SAAS,CAAC,EAAE;MACzD;MACA,MAAM;QAAEC,IAAI;QAAE,GAAGG;MAAQ,CAAC,GAAG;QAAE,GAAG,IAAI,CAACF,KAAK;QAAEG,MAAM,EAAE,IAAI,CAACC;MAAU,CAAC;MACtE,IAAI,CAACC,MAAM,CAACC,UAAU,CAACJ,OAAO,CAAC;IACjC;EACF;EAEAK,oBAAoBA,CAAA,EAAS;IAC3B,IAAI,CAACN,eAAe,CAAC,CAAC;EACxB;EAEAL,aAAaA,CAAA,EAAS;IACpB,MAAM;MAAEG,IAAI;MAAES,MAAM;MAAEC,SAAS;MAAEC,KAAK;MAAEC,MAAM;MAAEC,IAAI;MAAEC;IAAG,CAAC,GAAG,IAAI,CAACb,KAAK;IACvE,MAAME,OAAO,GAAG;MACdW,EAAE,EAAEA,EAAE,IAAI,UAAU;MACpBL,MAAM;MACNC,SAAS;MACTC,KAAK;MACLC,MAAM;MACNC,IAAI;MACJT,MAAM,EAAE,IAAI,CAACC;IACf,CAAC;IAEDL,IAAI,CAACe,GAAG,CAACvB,cAAc,EAAEW,OAAO,CAAC;IAEjC,IAAI,CAACG,MAAM,GAAGN,IAAI,CAACgB,SAAS,CAACb,OAAO,CAACW,EAAE,CAAE;EAC3C;EAEAZ,eAAeA,CAACD,KAAK,EAAqB;IAAA,IAA1BA,KAAK;MAALA,KAAK,GAAG,IAAI,CAACA,KAAK;IAAA;IAChC,MAAM;MAAED;IAAK,CAAC,GAAGC,KAAK;IAEtBD,IAAI,CAACiB,YAAY,CAAC,IAAI,CAACX,MAAM,CAAC;EAChC;;EAEA;EACAY,MAAMA,CAAA,EAAG;IACP,OAAO5B,CAAC,CAAC,KAAK,EAAE;MACd6B,SAAS,EAAE,gBAAgB;MAC3BC,GAAG,EAAGf,SAAsB,IAAK;QAC/B,IAAI,CAACA,SAAS,GAAGA,SAAS;MAC5B,CAAC;MACD,GAAGZ,YAAY,CAAC,IAAI,CAACQ,KAAK;IAC5B,CAAC,CAAC;EACJ;AACF;AAEA,eAAeN,QAAQ","ignoreList":[]}