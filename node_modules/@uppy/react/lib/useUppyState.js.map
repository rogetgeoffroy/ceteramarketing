{"version":3,"names":["useMemo","useCallback","useSyncExternalStoreWithSelector","useUppyState","uppy","selector","subscribe","store","bind","getSnapshot","getState"],"sources":["useUppyState.ts"],"sourcesContent":["import type { Uppy, State, Body, Meta } from '@uppy/core'\nimport { useMemo, useCallback } from 'react'\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/with-selector.js'\n\nexport default function useUppyState<\n  M extends Meta = Meta,\n  B extends Body = Body,\n  T = any,\n>(uppy: Uppy<M, B>, selector: (state: State<M, B>) => T): T {\n  const subscribe = useMemo(\n    () => uppy.store.subscribe.bind(uppy.store),\n    [uppy.store],\n  )\n  const getSnapshot = useCallback(() => uppy.store.getState(), [uppy.store])\n\n  return useSyncExternalStoreWithSelector(\n    subscribe,\n    getSnapshot, // client\n    getSnapshot, // server\n    selector,\n  )\n}\n"],"mappings":"AACA,SAASA,OAAO,EAAEC,WAAW,QAAQ,OAAO;AAC5C,SAASC,gCAAgC,QAAQ,0CAA0C;AAE3F,eAAe,SAASC,YAAYA,CAIlCC,IAAgB,EAAEC,QAAmC,EAAK;EAC1D,MAAMC,SAAS,GAAGN,OAAO,CACvB,MAAMI,IAAI,CAACG,KAAK,CAACD,SAAS,CAACE,IAAI,CAACJ,IAAI,CAACG,KAAK,CAAC,EAC3C,CAACH,IAAI,CAACG,KAAK,CACb,CAAC;EACD,MAAME,WAAW,GAAGR,WAAW,CAAC,MAAMG,IAAI,CAACG,KAAK,CAACG,QAAQ,CAAC,CAAC,EAAE,CAACN,IAAI,CAACG,KAAK,CAAC,CAAC;EAE1E,OAAOL,gCAAgC,CACrCI,SAAS,EACTG,WAAW;EAAE;EACbA,WAAW;EAAE;EACbJ,QACF,CAAC;AACH","ignoreList":[]}