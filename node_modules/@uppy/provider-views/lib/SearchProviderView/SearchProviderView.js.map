{"version":3,"names":["h","classNames","remoteFileObjToLocal","SearchInput","Browser","packageJson","PartialTreeUtils","shouldHandleScroll","handleError","getClickedRange","FooterActions","addFiles","getCheckedFilesWithPaths","defaultState","loading","searchString","partialTree","type","id","cached","nextPagePath","currentFolderId","isInputMode","defaultOptions","viewType","showTitles","showFilter","utmSource","SearchProviderView","constructor","plugin","opts","isHandlingScroll","lastCheckbox","validateSingleFile","file","companionFile","result","uppy","getDisplayedPartialTree","getPluginState","filter","item","setSearchString","setPluginState","validateAggregateRestrictions","checkedFiles","status","uppyFiles","map","data","provider","bind","search","resetPluginState","handleScroll","donePicking","cancelSelection","toggleCheckbox","render","on","registerRequestClient","tearDown","setLoading","newPartialTree","response","nextPageQuery","items","requestPath","parentId","error","event","root","find","i","newRoot","oldItems","companionFiles","ourItem","isShiftKeyPressed","clickedRange","afterToggleCheckbox","state","viewOptions","i18n","submitSearchString","inputLabel","buttonLabel","wrapperClassName","inputClassName","showButton","buttonCSSClassName","className","clearSearchLabel","displayedPartialTree","openFolder","noResultsLabel","isLoading","virtualList","VERSION","version"],"sources":["SearchProviderView.tsx"],"sourcesContent":["import { h } from 'preact'\n\nimport type {\n  Body,\n  Meta,\n  DefinePluginOpts,\n  PartialTree,\n  PartialTreeFile,\n  PartialTreeFolderNode,\n  PartialTreeFolderRoot,\n  UnknownSearchProviderPlugin,\n  UnknownSearchProviderPluginState,\n} from '@uppy/core'\nimport type { CompanionFile } from '@uppy/utils/lib/CompanionFile'\nimport classNames from 'classnames'\nimport type { ValidateableFile } from '@uppy/core/lib/Restricter.js'\nimport remoteFileObjToLocal from '@uppy/utils/lib/remoteFileObjToLocal'\nimport SearchInput from '../SearchInput.jsx'\nimport Browser from '../Browser.jsx'\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nimport packageJson from '../../package.json'\nimport PartialTreeUtils from '../utils/PartialTreeUtils/index.js'\nimport shouldHandleScroll from '../utils/shouldHandleScroll.js'\nimport handleError from '../utils/handleError.js'\nimport getClickedRange from '../utils/getClickedRange.js'\nimport FooterActions from '../FooterActions.jsx'\nimport addFiles from '../utils/addFiles.js'\nimport getCheckedFilesWithPaths from '../utils/PartialTreeUtils/getCheckedFilesWithPaths.js'\n\nconst defaultState: UnknownSearchProviderPluginState = {\n  loading: false,\n  searchString: '',\n  partialTree: [\n    {\n      type: 'root',\n      id: null,\n      cached: false,\n      nextPagePath: null,\n    },\n  ],\n  currentFolderId: null,\n  isInputMode: true,\n}\n\ninterface Opts<M extends Meta, B extends Body> {\n  provider: UnknownSearchProviderPlugin<M, B>['provider']\n  viewType?: 'list' | 'grid' | 'unsplash'\n  showTitles?: boolean\n  showFilter?: boolean\n  utmSource?: string\n}\n\ntype RenderOpts<M extends Meta, B extends Body> = Omit<Opts<M, B>, 'provider'>\n\ntype Res = {\n  items: CompanionFile[]\n  nextPageQuery: string | null\n  searchedFor: string\n}\n\nconst defaultOptions = {\n  viewType: 'grid' as const,\n  showTitles: true,\n  showFilter: true,\n  utmSource: 'Companion',\n}\n\n/**\n * SearchProviderView, used for Unsplash and future image search providers.\n * Extends generic View, shared with regular providers like Google Drive and Instagram.\n */\nexport default class SearchProviderView<M extends Meta, B extends Body> {\n  static VERSION = packageJson.version\n\n  plugin: UnknownSearchProviderPlugin<M, B>\n\n  provider: UnknownSearchProviderPlugin<M, B>['provider']\n\n  opts: DefinePluginOpts<Opts<M, B>, keyof typeof defaultOptions>\n\n  isHandlingScroll: boolean = false\n\n  lastCheckbox: string | null = null\n\n  constructor(plugin: UnknownSearchProviderPlugin<M, B>, opts: Opts<M, B>) {\n    this.plugin = plugin\n    this.provider = opts.provider\n    this.opts = { ...defaultOptions, ...opts }\n\n    this.setSearchString = this.setSearchString.bind(this)\n    this.search = this.search.bind(this)\n    this.resetPluginState = this.resetPluginState.bind(this)\n    this.handleScroll = this.handleScroll.bind(this)\n    this.donePicking = this.donePicking.bind(this)\n    this.cancelSelection = this.cancelSelection.bind(this)\n    this.toggleCheckbox = this.toggleCheckbox.bind(this)\n\n    this.render = this.render.bind(this)\n\n    // Set default state for the plugin\n    this.resetPluginState()\n\n    // @ts-expect-error this should be typed in @uppy/dashboard.\n    this.plugin.uppy.on('dashboard:close-panel', this.resetPluginState)\n\n    this.plugin.uppy.registerRequestClient(\n      this.provider.provider,\n      this.provider,\n    )\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  tearDown(): void {\n    // Nothing.\n  }\n\n  setLoading(loading: boolean | string): void {\n    this.plugin.setPluginState({ loading })\n  }\n\n  resetPluginState(): void {\n    this.plugin.setPluginState(defaultState)\n  }\n\n  cancelSelection(): void {\n    const { partialTree } = this.plugin.getPluginState()\n    const newPartialTree: PartialTree = partialTree.map((item) =>\n      item.type === 'root' ? item : { ...item, status: 'unchecked' },\n    )\n    this.plugin.setPluginState({ partialTree: newPartialTree })\n  }\n\n  async search(): Promise<void> {\n    const { searchString } = this.plugin.getPluginState()\n    if (searchString === '') return\n\n    this.setLoading(true)\n    try {\n      const response = await this.provider.search<Res>(searchString)\n\n      const newPartialTree: PartialTree = [\n        {\n          type: 'root',\n          id: null,\n          cached: false,\n          nextPagePath: response.nextPageQuery,\n        },\n        ...response.items.map(\n          (item) =>\n            ({\n              type: 'file',\n              id: item.requestPath,\n              status: 'unchecked',\n              parentId: null,\n              data: item,\n            }) as PartialTreeFile,\n        ),\n      ]\n      this.plugin.setPluginState({\n        partialTree: newPartialTree,\n        isInputMode: false,\n      })\n    } catch (error) {\n      handleError(this.plugin.uppy)(error)\n    }\n    this.setLoading(false)\n  }\n\n  async handleScroll(event: Event): Promise<void> {\n    const { partialTree, searchString } = this.plugin.getPluginState()\n    const root = partialTree.find(\n      (i) => i.type === 'root',\n    ) as PartialTreeFolderRoot\n\n    if (\n      shouldHandleScroll(event) &&\n      !this.isHandlingScroll &&\n      root.nextPagePath\n    ) {\n      this.isHandlingScroll = true\n      try {\n        const response = await this.provider.search<Res>(\n          searchString,\n          root.nextPagePath,\n        )\n\n        const newRoot: PartialTreeFolderRoot = {\n          ...root,\n          nextPagePath: response.nextPageQuery,\n        }\n        const oldItems = partialTree.filter((i) => i.type !== 'root')\n\n        const newPartialTree: PartialTree = [\n          newRoot,\n          ...oldItems,\n          ...response.items.map(\n            (item) =>\n              ({\n                type: 'file',\n                id: item.requestPath,\n                status: 'unchecked',\n                parentId: null,\n                data: item,\n              }) as PartialTreeFile,\n          ),\n        ]\n        this.plugin.setPluginState({ partialTree: newPartialTree })\n      } catch (error) {\n        handleError(this.plugin.uppy)(error)\n      }\n      this.isHandlingScroll = false\n    }\n  }\n\n  async donePicking(): Promise<void> {\n    const { partialTree } = this.plugin.getPluginState()\n\n    // 1. Add files\n    const companionFiles = getCheckedFilesWithPaths(partialTree)\n    addFiles(companionFiles, this.plugin, this.provider)\n\n    // 2. Reset state\n    this.resetPluginState()\n  }\n\n  toggleCheckbox(\n    ourItem: PartialTreeFolderNode | PartialTreeFile,\n    isShiftKeyPressed: boolean,\n  ) {\n    const { partialTree } = this.plugin.getPluginState()\n\n    const clickedRange = getClickedRange(\n      ourItem.id,\n      this.getDisplayedPartialTree(),\n      isShiftKeyPressed,\n      this.lastCheckbox,\n    )\n    const newPartialTree = PartialTreeUtils.afterToggleCheckbox(\n      partialTree,\n      clickedRange,\n    )\n\n    this.plugin.setPluginState({ partialTree: newPartialTree })\n    this.lastCheckbox = ourItem.id\n  }\n\n  validateSingleFile = (file: CompanionFile): string | null => {\n    const companionFile: ValidateableFile<M, B> = remoteFileObjToLocal(file)\n    const result = this.plugin.uppy.validateSingleFile(companionFile)\n    return result\n  }\n\n  getDisplayedPartialTree = (): (PartialTreeFile | PartialTreeFolderNode)[] => {\n    const { partialTree } = this.plugin.getPluginState()\n    return partialTree.filter((item) => item.type !== 'root') as (\n      | PartialTreeFolderNode\n      | PartialTreeFile\n    )[]\n  }\n\n  setSearchString = (searchString: string) => {\n    this.plugin.setPluginState({ searchString })\n    if (searchString === '') {\n      this.plugin.setPluginState({ partialTree: [] })\n    }\n  }\n\n  validateAggregateRestrictions = (partialTree: PartialTree) => {\n    const checkedFiles = partialTree.filter(\n      (item) => item.type === 'file' && item.status === 'checked',\n    ) as PartialTreeFile[]\n    const uppyFiles = checkedFiles.map((file) => file.data)\n    return this.plugin.uppy.validateAggregateRestrictions(uppyFiles)\n  }\n\n  render(state: unknown, viewOptions: RenderOpts<M, B> = {}): h.JSX.Element {\n    const { isInputMode, searchString, loading, partialTree } =\n      this.plugin.getPluginState()\n    const { i18n } = this.plugin.uppy\n    const opts = { ...this.opts, ...viewOptions }\n\n    if (isInputMode) {\n      return (\n        <SearchInput\n          searchString={searchString}\n          setSearchString={this.setSearchString}\n          submitSearchString={this.search}\n          inputLabel={i18n('enterTextToSearch')}\n          buttonLabel={i18n('searchImages')}\n          wrapperClassName=\"uppy-SearchProvider\"\n          inputClassName=\"uppy-c-textInput uppy-SearchProvider-input\"\n          showButton\n          buttonCSSClassName=\"uppy-SearchProvider-searchButton\"\n        />\n      )\n    }\n\n    return (\n      <div\n        className={classNames(\n          'uppy-ProviderBrowser',\n          `uppy-ProviderBrowser-viewType--${opts.viewType}`,\n        )}\n      >\n        {opts.showFilter && (\n          <SearchInput\n            searchString={searchString}\n            setSearchString={this.setSearchString}\n            submitSearchString={this.search}\n            inputLabel={i18n('search')}\n            clearSearchLabel={i18n('resetSearch')}\n            wrapperClassName=\"uppy-ProviderBrowser-searchFilter\"\n            inputClassName=\"uppy-ProviderBrowser-searchFilterInput\"\n          />\n        )}\n\n        <Browser\n          toggleCheckbox={this.toggleCheckbox}\n          displayedPartialTree={this.getDisplayedPartialTree()}\n          handleScroll={this.handleScroll}\n          openFolder={async () => {}}\n          noResultsLabel={i18n('noSearchResults')}\n          viewType={opts.viewType}\n          showTitles={opts.showTitles}\n          isLoading={loading}\n          i18n={i18n}\n          virtualList={false}\n          utmSource={this.opts.utmSource}\n        />\n\n        <FooterActions\n          partialTree={partialTree}\n          donePicking={this.donePicking}\n          cancelSelection={this.cancelSelection}\n          i18n={i18n}\n          validateAggregateRestrictions={this.validateAggregateRestrictions}\n        />\n      </div>\n    )\n  }\n}\n"],"mappings":"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","ignoreList":[]}